<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Criti.AI ì „ì²´ ì•„í‚¤í…ì²˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap");
      body {
        font-family: "Noto Sans KR", sans-serif;
        background-color: #f8fafc;
      }
      .diagram-card {
        background-color: white;
        border-radius: 0.75rem;
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -2px rgb(0 0 0 / 0.1);
        padding: 1.5rem;
        margin-bottom: 2rem;
        overflow: hidden;
      }
      h1,
      h2,
      h3 {
        font-weight: 700;
      }
      pre.mermaid {
        background-color: #f1f5f9;
        padding: 1rem;
        border-radius: 0.5rem;
        text-align: center;
      }
      code {
        background-color: #e2e8f0;
        padding: 0.2rem 0.4rem;
        border-radius: 0.25rem;
        font-size: 0.9em;
      }
      .key-feature {
        background-color: #f1f5f9;
        border-left: 4px solid #3b82f6;
        padding: 1rem;
        margin: 1rem 0;
        border-radius: 0.25rem;
      }
    </style>
  </head>
  <body class="p-4 sm:p-8">
    <div class="max-w-7xl mx-auto">
      <header class="text-center mb-12">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-800">
          ğŸ—ï¸ Criti.AI ì•„í‚¤í…ì²˜
        </h1>
        <p class="text-lg text-gray-600 mt-2">
          ì‹œìŠ¤í…œ êµ¬ì¡°, ë°ì´í„° íë¦„, ë°°í¬ ì „ëµì— ëŒ€í•œ ì‹œê°ì  ê°œìš”
        </p>
      </header>

      <!-- Document Part 1: Backend & Caching Focus -->
      <div class="mb-16">
        <h2
          class="text-3xl font-bold text-gray-800 border-b-2 border-blue-500 pb-2 mb-8"
        >
          ë°±ì—”ë“œ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
        </h2>

        <div class="diagram-card">
          <h3 class="text-2xl mb-4">ğŸ›ï¸ 1. ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜</h3>
          <pre class="mermaid">
graph TB
    subgraph "<b>Client Layer</b>"
        WEB["ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜<br/>React/Vite"]
        EXT["Chrome <br/>í™•ì¥ í”„ë¡œê·¸ë¨"]
        MOB["ëª¨ë°”ì¼ ì•±<br/>(í–¥í›„)"]
    end

    subgraph "<b>Network Layer</b>"
        LB["ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ<br/>Nginx"]
        CORS["CORS ì •ì±…<br/>Express Middleware"]
    end

    subgraph "<b>Application Layer</b>"
        API["Express.js API ì„œë²„<br/>TypeScript"]
        subgraph "<b>ë¼ìš°í„°</b>"
            AR["Analysis Router<br/>/api/analysis"]
            CR["Challenge Router<br/>/api/challenge"]
            HR["Health Router<br/>/health"]
        end
        subgraph "<b>ì„œë¹„ìŠ¤</b>"
            GS["Gemini Service<br/>AI ë¶„ì„ ì—”ì§„"]
            DCS["Daily Challenge Service<br/>ìë™ ì±Œë¦°ì§€ ìƒì„±"]
            DS["Database Service<br/>ë°ì´í„° ê´€ë¦¬"]
            CS["Cache Service<br/>3ë‹¨ê³„ ìºì‹±"]
        end
    end

    subgraph "<b>Data Layer</b>"
        subgraph "<b>Cache Layer</b>"
            L1["L1: Redis Cache"]
            L2["L2: Database Cache"]
            L3["L3: Memory Cache"]
        end
        subgraph "<b>ì˜êµ¬ ì €ì¥ì†Œ</b>"
            DB[("SQLite/PostgreSQL<br/>ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤")]
            FILES["íŒŒì¼ ì‹œìŠ¤í…œ<br/>ë¡œê·¸ & ë°±ì—…"]
        end
    end

    subgraph "<b>ì™¸ë¶€ API</b>"
        GEMINI["Google Gemini AI<br/>ì½˜í…ì¸  ë¶„ì„"]
        NEWS["ì¶”ê°€ API<br/>(í–¥í›„ í™•ì¥)"]
    end

    subgraph "<b>ì¸í”„ë¼ ë ˆì´ì–´</b>"
        DOCKER["Docker ì»¨í…Œì´ë„ˆ<br/>ê²©ë¦¬ëœ ì‹¤í–‰ í™˜ê²½"]
        MONITOR["ë¡œê¸¸ & ì„±ëŠ¥ ë¶„ì„"]
        BACKUP["ë°±ì—… ì‹œìŠ¤í…œ<br/>ìë™ ë°±ì—…"]
    end

    WEB --> LB; EXT --> LB; MOB --> LB
    LB --> CORS; CORS --> API
    API --> AR; API --> CR; API --> HR
    AR --> GS; AR --> CS; CR --> DCS; CR --> DS
    CS --> L1; CS --> L2; CS --> L3
    DS --> DB; GS --> GEMINI; DCS --> GEMINI
    L2 --> DB
    DOCKER --> API; MONITOR --> DOCKER
    BACKUP --> DB; BACKUP --> FILES

    classDef client fill:#e1f5fe,stroke:#a7d7f9
    classDef network fill:#f3e5f5,stroke:#d0a9e2
    classDef app fill:#e8f5e8,stroke:#a5d6a7
    classDef data fill:#fff3e0,stroke:#ffcc80
    classDef external fill:#ffebee,stroke:#ef9a9a
    classDef infra fill:#f1f8e9,stroke:#c5e1a5
    class WEB,EXT,MOB client
    class LB,CORS network
    class API,AR,CR,HR,GS,DCS,DS,CS app
    class L1,L2,L3,DB,FILES data
    class GEMINI,NEWS external
    class DOCKER,MONITOR,BACKUP infra
                </pre>
        </div>

        <div class="diagram-card">
          <h3 class="text-2xl mb-4">ğŸ”„ 2. ìš”ì²­-ì‘ë‹µ ë°ì´í„° í”Œë¡œìš°</h3>
          <pre class="mermaid">
sequenceDiagram
    participant C as í´ë¼ì´ì–¸íŠ¸
    participant API as Express API
    participant CACHE as ìºì‹œ ì‹œìŠ¤í…œ
    participant DB as ë°ì´í„°ë² ì´ìŠ¤
    participant AI as Gemini AI

    Note over C,AI: ğŸ” ë‰´ìŠ¤ ê¸°ì‚¬ ë¶„ì„ ìš”ì²­ í”Œë¡œìš°

    C->>+API: POST /api/analysis/analyze<br/>{url, content, title}
    Note over API: ğŸ“ ì…ë ¥ ê²€ì¦ ë° ì „ì²˜ë¦¬
    API->>API: URL ì •ê·œí™”<br/>ì½˜í…ì¸  í¬ê¸° í™•ì¸

    Note over API,CACHE: âš¡ 1ë‹¨ê³„: Redis ìºì‹œ í™•ì¸
    API->>+CACHE: Redis.get(urlHash)
    CACHE->>-API: cache_result || null

    alt ğŸ¯ Redis ìºì‹œ íˆíŠ¸ (95%)
        API->>C: âœ… ë¶„ì„ ê²°ê³¼ ë°˜í™˜<br/>(5ms ì‘ë‹µ)
    else âŒ Redis ìºì‹œ ë¯¸ìŠ¤
        Note over API,DB: ğŸ’¾ 2ë‹¨ê³„: DB ìºì‹œ í™•ì¸
        API->>+DB: SELECT * FROM analysis_cache<br/>WHERE url = ?
        DB->>-API: db_result || null
        alt ğŸ’¾ DB ìºì‹œ íˆíŠ¸ (4%)
            API->>CACHE: Redis.set(key, result)
            API->>C: âœ… ë¶„ì„ ê²°ê³¼ ë°˜í™˜<br/>(50ms ì‘ë‹µ)
        else âŒ DB ìºì‹œ ë¯¸ìŠ¤
            Note over API,AI: ğŸ¤– 3ë‹¨ê³„: AI ë¶„ì„ ì‹¤í–‰
            API->>+AI: Gemini.generateContent(prompt)
            Note over AI: ğŸ§  AI ë¶„ì„ ê³¼ì •<br/>- ì½˜í…ì¸  ì‹ ë¢°ë„ ë¶„ì„<br/>- í¸í–¥ì„± íƒì§€<br/>- ë…¼ë¦¬ì  ì˜¤ë¥˜ ì‹ë³„<br/>- JSON ì‘ë‹µ ìƒì„±
            AI->>-API: analysis_result
            Note over API: ğŸ“Š ê²°ê³¼ ê²€ì¦ ë° í›„ì²˜ë¦¬
            API->>API: validateResult()<br/>postProcessHighlights()
            par ğŸ“¦ ë³‘ë ¬ ìºì‹œ ì €ì¥
                API->>CACHE: Redis.set(key, result, 24h)
            and
                API->>DB: INSERT INTO analysis_cache
            and
                API->>API: Memory.set(key, result)
            end
            API->>C: âœ… ë¶„ì„ ê²°ê³¼ ë°˜í™˜<br/>(2.5ì´ˆ ì‘ë‹µ)
        end
    end
    Note over C,AI: ğŸ“ˆ ì„±ëŠ¥ í†µê³„: Redis 95% | DB 4% | AI 1%
                </pre>
        </div>

        <div class="diagram-card">
          <h3 class="text-2xl mb-4">âš¡ 3. 3ë‹¨ê³„ ìºì‹± ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜</h3>
          <pre class="mermaid">
graph TD
    subgraph "ğŸ“¥ ìš”ì²­ ì§„ì…ì "
        REQ[í´ë¼ì´ì–¸íŠ¸ ìš”ì²­<br/>ë¶„ì„ API í˜¸ì¶œ]
    end

    subgraph "ğŸƒâ€â™‚ï¸ L1: Redis ìºì‹œ (ì´ˆê³ ì†)"
        R1{Redis<br/>ìºì‹œ í™•ì¸}
        R2[Redis íˆíŠ¸<br/>âš¡ 5ms ì‘ë‹µ]
        R3[Redisì— ì €ì¥<br/>TTL: 24ì‹œê°„]
    end

    subgraph "ğŸ’¾ L2: Database ìºì‹œ (ì¤‘ì†)"
        D1{Database<br/>ìºì‹œ í™•ì¸}
        D2[DB íˆíŠ¸<br/>ğŸ’¾ 50ms ì‘ë‹µ]
        D3[DBì— ì˜êµ¬ ì €ì¥<br/>íˆíŠ¸ ì¹´ìš´íŠ¸ ì¦ê°€]
    end

    subgraph "ğŸ§  L3: Memory ìºì‹œ (ìµœê³ ì†)"
        M1{Memory<br/>ìºì‹œ í™•ì¸}
        M2[Memory íˆíŠ¸<br/>ğŸ§  1ms ì‘ë‹µ]
        M3[Memoryì— ì €ì¥<br/>LRU ì •ì±…, 100ê°œ ì œí•œ]
    end

    subgraph "ğŸ¤– L4: AI ë¶„ì„ (ì €ì†)"
        A1[Gemini AI í˜¸ì¶œ<br/>ğŸ¤– 2500ms ì‘ë‹µ]
        A2[ê²°ê³¼ ê²€ì¦<br/>JSON íŒŒì‹±]
    end

    REQ --> R1
    R1 -->|ìºì‹œ íˆíŠ¸| R2
    R1 -->|ìºì‹œ ë¯¸ìŠ¤| D1
    D1 -->|ìºì‹œ íˆíŠ¸| D2
    D1 -->|ìºì‹œ ë¯¸ìŠ¤| M1
    M1 -->|ìºì‹œ íˆíŠ¸| M2
    M1 -->|ìºì‹œ ë¯¸ìŠ¤| A1
    A1 --> A2
    A2 --> A3[ì „ì²´ ìºì‹œ ë ˆì´ì–´ ì €ì¥]
    A3 --> R3; A3 --> D3; A3 --> M3
    D2 --> R3

    classDef redis fill:#ffcdd2,stroke:#ef5350
    classDef database fill:#bbdefb,stroke:#42a5f5
    classDef memory fill:#c8e6c9,stroke:#66bb6a
    classDef ai fill:#ffecb3,stroke:#ffa726
    
    class R1,R2,R3 redis
    class D1,D2,D3 database
    class M1,M2,M3 memory
    class A1,A2,A3 ai
                </pre>
        </div>

        <div class="diagram-card">
          <h3 class="text-2xl mb-4">ğŸ® 4. ì¼ì¼ ì±Œë¦°ì§€ ìë™ ìƒì„± ì‹œìŠ¤í…œ</h3>
          <pre class="mermaid">
graph TB
    subgraph "â° ìŠ¤ì¼€ì¤„ë§ ì‹œìŠ¤í…œ"
        CRON[ë§¤ì¼ ìì • ì‹¤í–‰<br/>Node.js setTimeout]
        CHECK{ì˜¤ëŠ˜ ì±Œë¦°ì§€<br/>ì¡´ì¬ í™•ì¸}
    end

    subgraph "ğŸ¤– AI ì±Œë¦°ì§€ ìƒì„±"
        TEMPLATE[ì±Œë¦°ì§€ í…œí”Œë¦¿<br/>ë‚œì´ë„ë³„ 5ê°œ]
        subgraph "ë‚œì´ë„ë³„ ìƒì„±"
            BEG[ì´ˆê¸‰ ì±Œë¦°ì§€<br/>ë…¼ë¦¬ì  ì˜¤ë¥˜]
            INT1[ì¤‘ê¸‰ ì±Œë¦°ì§€<br/>ê´‘ê³ ì„± ì½˜í…ì¸ ]
            INT2[ì¤‘ê¸‰ ì±Œë¦°ì§€<br/>ì •ë³´ ì¶œì²˜]
            ADV[ê³ ê¸‰ ì±Œë¦°ì§€<br/>ë³µí•©ì  ë¬¸ì œ]
        end
        AI_GEN[Gemini AI<br/>í”„ë¡¬í”„íŠ¸ ê¸°ë°˜ ìƒì„±]
        VALIDATE[ê²°ê³¼ ê²€ì¦<br/>í’ˆì§ˆ í™•ì¸]
    end

    subgraph "ğŸ›¡ï¸ ë°±ì—… ì‹œìŠ¤í…œ"
        FALLBACK{AI ìƒì„±<br/>ì‹¤íŒ¨?}
        MANUAL[ìˆ˜ë™ ì‘ì„±<br/>ë°±ì—… ì±Œë¦°ì§€]
        BASIC[ê¸°ë³¸ ì±Œë¦°ì§€<br/>í•˜ë“œì½”ë”©]
    end

    subgraph "ğŸ’¾ ì €ì¥ ì‹œìŠ¤í…œ"
        DB_SAVE[(ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥<br/>dailyKeyë¡œ êµ¬ë¶„)]
        CACHE_SAVE[Redis ìºì‹±<br/>25ì‹œê°„ TTL]
    end
    
    CRON --> CHECK
    CHECK -->|ì¡´ì¬í•¨| RETURN[ê¸°ì¡´ ì±Œë¦°ì§€ ë°˜í™˜]
    CHECK -->|ì—†ìŒ| TEMPLATE
    TEMPLATE --> BEG & INT1 & INT2 & ADV
    BEG --> AI_GEN; INT1 --> AI_GEN; INT2 --> AI_GEN; ADV --> AI_GEN
    AI_GEN --> VALIDATE
    VALIDATE -->|ì„±ê³µ| DB_SAVE
    VALIDATE -->|ì‹¤íŒ¨| FALLBACK
    FALLBACK -->|ì¬ì‹œë„| MANUAL
    FALLBACK -->|ìµœì¢… ì‹¤íŒ¨| BASIC
    MANUAL --> DB_SAVE
    BASIC --> DB_SAVE
    DB_SAVE --> CACHE_SAVE
    CACHE_SAVE --> COMPLETE[âœ… ìƒì„± ì™„ë£Œ]

    classDef schedule fill:#e3f2fd
    classDef ai fill:#f3e5f5
    classDef backup fill:#fff3e0
    classDef storage fill:#e8f5e8

    class CRON,CHECK schedule
    class TEMPLATE,BEG,INT1,INT2,ADV,AI_GEN,VALIDATE ai
    class FALLBACK,MANUAL,BASIC backup
    class DB_SAVE,CACHE_SAVE storage
                </pre>
        </div>
        <div class="diagram-card">
          <h3 class="text-2xl mb-4">ğŸ¯ í•µì‹¬ ì•„í‚¤í…ì²˜ íŠ¹ì§•</h3>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
            <div class="key-feature">
              <strong>1. í™•ì¥ì„± (Scalability):</strong> ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì¤€ë¹„,
              ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥í•œ ìºì‹±, ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ë°°í¬.
            </div>
            <div class="key-feature">
              <strong>2. ì„±ëŠ¥ (Performance):</strong> 3ë‹¨ê³„ ìºì‹±ìœ¼ë¡œ 95% ìš”ì²­
              ê³ ì† ì²˜ë¦¬, ë¹„ë™ê¸° ì²˜ë¦¬, ë©”ëª¨ë¦¬ ìµœì í™”.
            </div>
            <div class="key-feature">
              <strong>3. ì•ˆì •ì„± (Reliability):</strong> ë‹¤ì¸µ ë°±ì—… ì‹œìŠ¤í…œ, ìë™
              ëª¨ë‹ˆí„°ë§ ë° ì¬ì‹œì‘, Graceful degradation.
            </div>
            <div class="key-feature">
              <strong>4. ìœ ì§€ë³´ìˆ˜ì„± (Maintainability):</strong> ëª…í™•í•œ ê³„ì¸µ
              ë¶„ë¦¬, TypeScriptë¥¼ í†µí•œ íƒ€ì… ì•ˆì „ì„±, í‘œì¤€í™”ëœ API.
            </div>
            <div class="key-feature">
              <strong>5. ë¹„ìš© íš¨ìœ¨ì„± (Cost Efficiency):</strong> ìºì‹±ìœ¼ë¡œ AI API
              í˜¸ì¶œ 98% ì ˆì•½, ì»¨í…Œì´ë„ˆ ìµœì í™”, ìš´ì˜ ìë™í™”.
            </div>
          </div>
        </div>
      </div>

      <!-- Document Part 2: Monorepo & Frontend Focus -->
      <div>
        <h2
          class="text-3xl font-bold text-gray-800 border-b-2 border-green-500 pb-2 mb-8"
        >
          í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ë°°í¬ ì•„í‚¤í…ì²˜
        </h2>

        <div class="diagram-card">
          <h3 class="text-2xl mb-4">
            ğŸŒ 1. ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (High-Level Overview)
          </h3>
          <pre class="mermaid">
graph TB
    subgraph "<b>ğŸ¯ í´ë¼ì´ì–¸íŠ¸ ë ˆì´ì–´</b>"
        CHROME["ğŸ§© Chrome Extension<br/>chrome-extension/<br/>React + Vite"]
        WEB["ğŸŒ ì›¹ í”Œë«í¼<br/>challenge-web/<br/>Next.js SPA"]
        FUTURE["ğŸ“± ëª¨ë°”ì¼ ì•±<br/>(í–¥í›„ í™•ì¥)"]
    end

    subgraph "<b>ğŸ”— ê³µí†µ ë ˆì´ì–´</b>"
        SHARED["ğŸ”§ Shared<br/>ê³µí†µ íƒ€ì… & ìœ í‹¸ë¦¬í‹°<br/>TypeScript ì¸í„°í˜ì´ìŠ¤"]
    end

    subgraph "<b>ğŸ® ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´</b>"
        API["ğŸš€ Express.js API<br/>backend/<br/>TypeScript ì„œë²„"]
        
        subgraph "<b>ğŸ“ ë¼ìš°í„°</b>"
            ROUTES["ğŸ›£ï¸ API ë¼ìš°íŒ…<br/>RESTful ì—”ë“œí¬ì¸íŠ¸"]
        end
        
        subgraph "<b>âš™ï¸ í•µì‹¬ ì„œë¹„ìŠ¤</b>"
            GEMINI["ğŸ¤– Gemini Service<br/>AI ë¶„ì„ ì—”ì§„"]
            CACHE["âš¡ Redis Cache<br/>ì„±ëŠ¥ ìµœì í™”"]
            DB_SVC["ğŸ’¾ Database Service<br/>ë°ì´í„° ì˜ì†ì„±"]
            CHALLENGE["ğŸ¯ Challenge Service<br/>ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜"]
        end
    end

    subgraph "<b>ğŸ“Š ë°ì´í„° ë ˆì´ì–´</b>"
        subgraph "<b>ğŸ—„ï¸ ì˜êµ¬ ì €ì¥ì†Œ</b>"
            PRISMA[("ğŸ”· Prisma ORM<br/>schema.prisma<br/>íƒ€ì… ì•ˆì „ DB")]
            REDIS[("âš¡ Redis Cache<br/>ê³ ì† ìºì‹±")]
        end
    end

    subgraph "<b>ğŸŒ ì™¸ë¶€ API</b>"
        GEMINI_API["ğŸ”® Google Gemini AI<br/>ì½˜í…ì¸  ë¶„ì„ & ìƒì„±"]
        EXT_API["ğŸ”Œ í™•ì¥ API<br/>(í–¥í›„ í†µí•©)"]
    end

    subgraph "<b>ğŸ—ï¸ ì¸í”„ë¼ ë ˆì´ì–´</b>"
        DOCKER["ğŸ³ Docker<br/>config/docker/<br/>ì»¨í…Œì´ë„ˆí™”"]
        NGINX["ğŸ”€ Nginx<br/>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ<br/>ë¡œë“œ ë°¸ëŸ°ì‹±"]
        SCRIPTS["ğŸš€ DevOps Scripts<br/>ìë™í™” ë°°í¬<br/>ëª¨ë‹ˆí„°ë§ & ìµœì í™”"]
    end

    subgraph "<b>â˜ï¸ ë°°í¬ í™˜ê²½</b>"
        VERCEL["â–² Vercel<br/>ì›¹ í”Œë«í¼ í˜¸ìŠ¤íŒ…"]
        ORACLE["â˜ï¸ Oracle Cloud<br/>ë§ˆì´í¬ë¡œ ì„œë²„<br/>API & ë°ì´í„°ë² ì´ìŠ¤"]
    end

    %% í´ë¼ì´ì–¸íŠ¸ â†’ ê³µí†µ
    CHROME --> SHARED
    WEB --> SHARED
    FUTURE -.-> SHARED

    %% ê³µí†µ â†’ ì„œë²„
    SHARED --> API

    %% API ë‚´ë¶€ í”Œë¡œìš°
    API --> ROUTES
    ROUTES --> GEMINI
    ROUTES --> CACHE
    ROUTES --> DB_SVC
    ROUTES --> CHALLENGE

    %% ì„œë¹„ìŠ¤ â†’ ë°ì´í„°
    DB_SVC --> PRISMA
    CACHE --> REDIS
    GEMINI --> GEMINI_API
    CHALLENGE --> GEMINI_API

    %% ì¸í”„ë¼ ì—°ê²°
    DOCKER --> API
    NGINX --> API
    SCRIPTS --> DOCKER
    SCRIPTS --> NGINX

    %% ë°°í¬ ì—°ê²°
    WEB --> VERCEL
    CHROME --> VERCEL
    API --> ORACLE
    PRISMA --> ORACLE
    REDIS --> ORACLE

    %% ì™¸ë¶€ API ì—°ê²°
    GEMINI_API -.-> EXT_API

    %% ìŠ¤íƒ€ì¼ ì •ì˜
    classDef client fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#0d47a1
    classDef shared fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#4a148c
    classDef app fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#1b5e20
    classDef data fill:#fff8e1,stroke:#f57c00,stroke-width:2px,color:#e65100
    classDef external fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#b71c1c
    classDef infra fill:#f1f8e9,stroke:#689f38,stroke-width:2px,color:#33691e
    classDef deploy fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#880e4f

    class CHROME,WEB,FUTURE client
    class SHARED shared
    class API,ROUTES,GEMINI,CACHE,DB_SVC,CHALLENGE app
    class PRISMA,REDIS data
    class GEMINI_API,EXT_API external
    class DOCKER,NGINX,SCRIPTS infra
    class VERCEL,ORACLE deploy
                </pre>
        </div>

        <div class="diagram-card">
          <h3 class="text-2xl mb-4">ğŸ¢ 2. Monorepo êµ¬ì¡°ë„</h3>
          <pre class="mermaid">
graph TD
    subgraph "Criti AI Monorepo"
        Root[ë£¨íŠ¸ package.json<br/>- workspaces ì„¤ì •<br/>- í†µí•© ìŠ¤í¬ë¦½íŠ¸]
        subgraph "Frontend Apps"
            chrome-extension[chrome-extension/<br/>Next.js ë©”ì¸ ì•±]
            Challenge[challenge-web/<br/>React SPA]
        end
        subgraph "Backend"
            API[backend/<br/>Express.js API]
        end
        subgraph "Shared Resources"
            Shared[shared/<br/>ê³µí†µ íƒ€ì…/ìœ í‹¸]
            Config[config/<br/>ì„¤ì • íŒŒì¼]
        end
    end
    
    chrome-extension --> Shared
    Challenge --> Shared
    API --> Shared
    Root --> chrome-extension & Challenge & API & Shared

    classDef root fill:#f44336,color:#fff
    classDef chrome-extension fill:#2196f3,color:#fff
    classDef backend fill:#ff9800,color:#fff
    classDef shared fill:#4caf50,color:#fff
    
    class Root root
    class chrome-extension,Challenge chrome-extension
    class API backend
    class Shared,Config shared
                </pre>
        </div>

        <div class="diagram-card">
          <h3 class="text-2xl mb-4">ğŸš€ 3. ë°°í¬ ë° ì¸í”„ë¼ êµ¬ì¡°</h3>
          <pre class="mermaid">
graph TB
    subgraph "ê°œë°œ í™˜ê²½"
        Dev[ë¡œì»¬ ê°œë°œ<br/>- npm run dev:full]
        Testing[í…ŒìŠ¤íŠ¸ í™˜ê²½]
    end

    subgraph "GitHub Repository"
        Main[main ë¸Œëœì¹˜]
        Develop[develop ë¸Œëœì¹˜]
        Feature[feature/* ë¸Œëœì¹˜]
    end

    subgraph "CI/CD Pipeline"
        Actions[GitHub Actions<br/>- íƒ€ì… ì²´í¬, ë¦°íŠ¸, ë¹Œë“œ]
        Vercel[Vercel CI/CD<br/>- ìë™ ë°°í¬]
    end

    subgraph "Production Deployment"
        VercelProd[Vercel Production<br/>challenge-web ë°°í¬]
        VPS[Ubuntu VPS<br/>backend API ë°°í¬]
        CDN[Global CDN<br/>ì •ì  ìì‚° ë°°í¬]
    end

    Dev --> Feature --> Develop --> Main
    Main --> Actions
    Actions --> Vercel
    Vercel --> VercelProd
    Actions --> VPS
    VercelProd --> CDN

    classDef dev fill:#e3f2fd
    classDef git fill:#f3e5f5
    classDef cicd fill:#e8f5e8
    classDef prod fill:#fff3e0

    class Dev,Testing dev
    class Main,Develop,Feature git
    class Actions,Vercel cicd
    class VercelProd,VPS,CDN prod
                </pre>
        </div>

        <div class="diagram-card">
          <h3 class="text-2xl mb-4">ğŸ® 5. ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ì‹œìŠ¤í…œ í”Œë¡œìš°</h3>
          <pre class="mermaid">
stateDiagram-v2
    [*] --> UserIdentification

    UserIdentification --> LoadProgress: ê¸°ì¡´ ì‚¬ìš©ì
    UserIdentification --> CreateUser: ì‹ ê·œ ì‚¬ìš©ì

    CreateUser --> InitialChallenge
    LoadProgress --> ChallengeSelection
    InitialChallenge --> ChallengeInProgress
    ChallengeSelection --> ChallengeInProgress

    state ChallengeInProgress {
        [*] --> ReadingChallenge
        ReadingChallenge --> SelectingAnswers
        SelectingAnswers --> SubmittingAnswer
    }

    ChallengeInProgress --> ResultEvaluation

    state ResultEvaluation {
        [*] --> ScoreCalculation
        ScoreCalculation --> BadgeCheck
        BadgeCheck --> StatUpdate
        Update --> [*]
    }

    ResultEvaluation --> BadgeAnimation: ìƒˆ ë°°ì§€ íšë“
    ResultEvaluation --> NextChallenge: ì¼ë°˜ ì™„ë£Œ

    BadgeAnimation --> NextChallenge
    NextChallenge --> ChallengeSelection

    note right of UserIdentification
        localStorage ê¸°ë°˜
        ë¸Œë¼ìš°ì €ë³„ ê³ ìœ  ID
    end note
    
    note right of ScoreCalculation
        ê¸°ë³¸ ì ìˆ˜
        + ì‹œê°„ ë³´ë„ˆìŠ¤
        + íŒíŠ¸ ë¯¸ì‚¬ìš© ë³´ë„ˆìŠ¤
    end note
                </pre
          >
        </div>
        <div class="diagram-card">
          <h3 class="text-2xl mb-4">ğŸ¨ 6. ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜ (Challenge-Web)</h3>
          <pre class="mermaid">
graph TD
    subgraph "App Layer"
        App[App.tsx]
    end
    subgraph "Page Layer"
        ChallengePage[ChallengePage.tsx]
    end
    subgraph "Container Components"
        Header; StatsBar; ChallengeCard; Result;
    end
    subgraph "UI Components"
        Button; OptionButton; Badge; Progress;
    end
    subgraph "Service & State"
        ApiService; LocalStorage; GlobalState;
    end
    
    App --> ChallengePage
    ChallengePage --> Header & StatsBar & ChallengeCard & Result
    ChallengeCard --> Button & OptionButton
    StatsBar --> Progress
    Result --> Badge
    
    ChallengePage --> ApiService & LocalStorage & GlobalState
    
    classDef app fill:#f44336,color:#fff
    classDef page fill:#2196f3,color:#fff
    classDef container fill:#ff9800,color:#fff
    classDef ui fill:#4caf50,color:#fff
    classDef service fill:#9c27b0,color:#fff
    
    class App app
    class ChallengePage page
    class Header,StatsBar,ChallengeCard,Result container
    class Button,OptionButton,Badge,Progress ui
    class ApiService,LocalStorage,GlobalState service
                </pre
          >
        </div>
      </div>
    </div>

    <script>
      mermaid.initialize({ startOnLoad: true, theme: "neutral" });
    </script>
  </body>
</html>